Version 4.1
SHEET 1 4916 2248
WIRE 1600 -400 1584 -400
WIRE 1712 -400 1680 -400
WIRE 1712 -384 1712 -400
WIRE 1584 -320 1584 -400
WIRE 736 -288 720 -288
WIRE 832 -288 816 -288
WIRE 1296 -288 1264 -288
WIRE 1392 -288 1376 -288
WIRE 832 -272 832 -288
WIRE 1392 -256 1392 -288
WIRE 608 -208 496 -208
WIRE 832 -208 688 -208
WIRE -816 -192 -832 -192
WIRE 1584 -160 1584 -240
WIRE 720 -128 720 -288
WIRE -2048 -112 -2208 -112
WIRE -1808 -112 -1968 -112
WIRE -1616 -112 -1808 -112
WIRE -1360 -112 -1552 -112
WIRE -1216 -112 -1360 -112
WIRE -864 -112 -1216 -112
WIRE -832 -112 -832 -192
WIRE -832 -112 -864 -112
WIRE -800 -112 -832 -112
WIRE -672 -112 -672 -192
WIRE -672 -112 -704 -112
WIRE -512 -112 -672 -112
WIRE -288 -112 -512 -112
WIRE -96 -112 -208 -112
WIRE 96 -112 -96 -112
WIRE 288 -112 96 -112
WIRE 352 -112 288 -112
WIRE 496 -112 496 -208
WIRE 496 -112 432 -112
WIRE 688 -112 496 -112
WIRE 1264 -112 1264 -288
WIRE 832 -96 832 -208
WIRE 832 -96 752 -96
WIRE 880 -96 832 -96
WIRE 992 -96 960 -96
WIRE 1232 -96 992 -96
WIRE 496 -80 496 -112
WIRE 688 -80 592 -80
WIRE 1392 -80 1296 -80
WIRE 1536 -80 1472 -80
WIRE 1584 -80 1584 -112
WIRE 992 -64 992 -96
WIRE 1232 -64 1168 -64
WIRE -720 -48 -720 -64
WIRE 592 -32 592 -80
WIRE 720 -16 720 -64
WIRE 736 -16 720 -16
WIRE 496 16 496 0
WIRE 736 16 736 -16
WIRE 992 16 992 0
WIRE 1168 32 1168 -64
WIRE 1392 32 1168 32
WIRE 1584 32 1584 -64
WIRE 1584 32 1472 32
WIRE 1680 32 1584 32
WIRE -720 48 -720 32
WIRE 592 64 592 48
WIRE 1264 64 1264 -48
WIRE 1584 96 1584 32
WIRE 736 112 736 96
WIRE 1264 176 1264 144
WIRE 1584 208 1584 176
WIRE -512 336 -512 -112
WIRE -832 352 -848 352
WIRE -864 432 -864 -112
WIRE -848 432 -848 352
WIRE -848 432 -864 432
WIRE -800 432 -848 432
WIRE -688 432 -688 352
WIRE -688 432 -704 432
WIRE -448 432 -688 432
WIRE -288 432 -448 432
WIRE -96 432 -96 -112
WIRE -96 432 -208 432
WIRE -720 512 -720 480
WIRE -1808 528 -1808 -112
WIRE -1712 528 -1808 528
WIRE -1216 528 -1216 -112
WIRE -1712 544 -1712 528
WIRE -1360 544 -1360 -112
WIRE -1808 560 -1808 528
WIRE -2208 592 -2208 -112
WIRE -720 608 -720 592
WIRE -1856 640 -1920 640
WIRE -1920 704 -1920 640
WIRE -1808 720 -1808 656
WIRE -1712 720 -1712 688
WIRE -1712 720 -1808 720
WIRE -1920 816 -1920 784
WIRE 96 848 96 -112
WIRE 288 848 288 -112
WIRE -448 896 -448 432
WIRE -832 928 -848 928
WIRE 1072 976 1056 976
WIRE 1168 976 1152 976
WIRE -864 992 -864 432
WIRE -848 992 -848 928
WIRE -848 992 -864 992
WIRE -800 992 -848 992
WIRE -688 992 -688 928
WIRE -688 992 -704 992
WIRE -368 992 -688 992
WIRE -272 992 -368 992
WIRE -96 992 -96 432
WIRE -96 992 -192 992
WIRE 1168 1008 1168 976
WIRE 1056 1088 1056 976
WIRE 1344 1104 1088 1104
WIRE -368 1120 -368 992
WIRE 720 1120 640 1120
WIRE 832 1120 800 1120
WIRE 1024 1120 912 1120
WIRE 1680 1136 1680 32
WIRE 1680 1136 1088 1136
WIRE 736 1200 736 1168
WIRE 784 1200 784 1168
WIRE 912 1200 912 1120
WIRE 912 1200 784 1200
WIRE 1056 1216 1056 1152
WIRE 1344 1216 1344 1104
WIRE 832 1232 832 1120
WIRE -720 1264 -720 1040
WIRE 640 1264 640 1120
WIRE 640 1264 -720 1264
WIRE 1056 1328 1056 1296
WIRE 1344 1328 1344 1296
WIRE 832 1344 832 1312
WIRE -816 1456 -832 1456
WIRE -864 1552 -864 992
WIRE -832 1552 -832 1456
WIRE -832 1552 -864 1552
WIRE -800 1552 -832 1552
WIRE -672 1552 -672 1456
WIRE -672 1552 -704 1552
WIRE -304 1552 -672 1552
WIRE -272 1552 -304 1552
WIRE -96 1552 -96 992
WIRE -96 1552 -192 1552
WIRE -304 1680 -304 1552
WIRE -720 1808 -720 1600
WIRE 736 1808 -720 1808
WIRE 848 1808 816 1808
WIRE 752 1888 752 1856
WIRE 800 1888 800 1856
WIRE 912 1888 912 1200
WIRE 912 1888 800 1888
WIRE 848 1936 848 1808
WIRE -2208 2000 -2208 672
WIRE -1808 2000 -1808 720
WIRE -1808 2000 -2208 2000
WIRE -1360 2000 -1360 608
WIRE -1360 2000 -1808 2000
WIRE -1216 2000 -1216 608
WIRE -1216 2000 -1360 2000
WIRE -640 2000 -1216 2000
WIRE -512 2000 -512 400
WIRE -512 2000 -640 2000
WIRE -448 2000 -448 960
WIRE -448 2000 -512 2000
WIRE -368 2000 -368 1184
WIRE -368 2000 -448 2000
WIRE -304 2000 -304 1744
WIRE -304 2000 -368 2000
WIRE 96 2000 96 912
WIRE 96 2000 -304 2000
WIRE 288 2000 288 928
WIRE 288 2000 96 2000
WIRE -640 2048 -640 2000
WIRE 848 2048 848 2016
FLAG -720 48 0
FLAG -720 608 0
FLAG 832 1344 0
FLAG -1920 816 0
FLAG 848 2048 0
FLAG -640 2048 0
FLAG 592 64 0
FLAG 992 16 0
FLAG 496 16 0
FLAG 832 -272 0
FLAG 736 112 0
FLAG 1712 -384 0
FLAG 1584 208 0
FLAG 1264 176 0
FLAG 1392 -256 0
FLAG 1344 1328 0
FLAG 1168 1008 0
FLAG 1056 1328 0
FLAG 736 1200 0
FLAG 752 1888 0
SYMBOL nmos -800 -64 R270
WINDOW 3 -70 -13 Left 2
WINDOW 0 -47 21 Left 2
SYMATTR Value IRFZ44N
SYMATTR InstName M1
SYMBOL voltage -720 -64 R0
WINDOW 3 -166 172 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 10 0 1n 1n 20u 100u 1000)
SYMATTR InstName Vg1
SYMBOL ind -304 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 100µ
SYMBOL nmos -800 480 R270
WINDOW 0 -52 18 Left 2
WINDOW 3 -86 -30 Left 2
SYMATTR InstName M2
SYMATTR Value IRFZ44N
SYMBOL ind -304 448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 100µ
SYMBOL voltage -720 496 R0
WINDOW 3 -184 155 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 10 25u 1n 1n 20u 100u 1000)
SYMATTR InstName Vg2
SYMBOL nmos -800 1040 R270
WINDOW 0 -44 16 Left 2
WINDOW 3 -78 -36 Left 2
SYMATTR InstName M3
SYMATTR Value IRFZ44N
SYMBOL ind -288 1008 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 100µ
SYMBOL voltage 832 1216 R0
WINDOW 3 -167 173 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 10 50u 1n 1n 20u 100u 1000)
SYMATTR InstName Vg3
SYMBOL res -1232 512 R0
SYMATTR InstName Rin
SYMATTR Value 24
SYMBOL cap -1376 544 R0
SYMATTR InstName Cin
SYMATTR Value 300µ
SYMBOL diode -1616 -128 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Din
SYMATTR Value 1N5819
SYMBOL nmos -1856 560 R0
WINDOW 0 -9 -17 Left 2
WINDOW 3 -91 62 Left 2
SYMATTR InstName M4
SYMATTR Value IRFZ44N
SYMBOL voltage -1920 688 R0
WINDOW 3 -86 170 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 10 0 1n 1n 18u 100u 1000)
SYMATTR InstName V2
SYMBOL voltage -2208 576 R0
SYMATTR InstName Vin
SYMATTR Value 10
SYMBOL ind -2064 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lin
SYMATTR Value 100µ
SYMBOL nmos -800 1600 R270
WINDOW 0 -48 2 Left 2
WINDOW 3 -80 -40 Left 2
SYMATTR InstName M5
SYMATTR Value IRFZ44N
SYMBOL ind -288 1568 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 100µ
SYMBOL voltage 848 1920 R0
WINDOW 3 -174 175 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 10 75u 1n 1n 20u 100u 1000)
SYMATTR InstName Vg4
SYMBOL res -720 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL cap -672 -208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL res -736 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL cap -688 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10n
SYMBOL res -736 912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL cap -688 912 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL res -720 1440 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL cap -672 1440 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10n
SYMBOL res -1696 640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL cap -1696 688 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 10n
SYMBOL cap 80 848 R0
SYMATTR InstName Cout
SYMATTR Value 300µ
SYMBOL res 272 832 R0
SYMATTR InstName Rout
SYMATTR Value 15
SYMBOL diode -496 400 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMBOL diode -432 960 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMBOL diode -352 1184 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N5819
SYMBOL diode -288 1744 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N5819
SYMBOL OpAmps\\OP07 720 -160 R0
SYMATTR InstName U1
SYMBOL voltage 592 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value 2.0426
SYMBOL res 976 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rlpf
SYMATTR Value 1k
SYMBOL cap 976 -64 R0
SYMATTR InstName Clpf
SYMATTR Value 0.1µ
SYMBOL res 480 -96 R0
SYMATTR InstName Rg
SYMATTR Value 10k
SYMBOL res 704 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rf
SYMATTR Value 100k
SYMBOL voltage 736 112 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V-
SYMATTR Value 15
SYMBOL voltage 720 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V+
SYMATTR Value 15
SYMBOL res 448 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rd
SYMATTR Value 10k
SYMBOL OpAmps\\OP07 1264 -16 M180
SYMATTR InstName U2
SYMBOL nmos4 1536 -160 R0
SYMATTR InstName M6
SYMATTR Value2 l=1u w=10u
SYMBOL res 1488 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 1488 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res 1600 192 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rs1
SYMATTR Value 100
SYMBOL res 1600 -224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rl1
SYMATTR Value 1k
SYMBOL voltage 1584 -400 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vs1
SYMATTR Value 15
SYMBOL voltage 1392 -288 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Vss
SYMATTR Value 15
SYMBOL voltage 1264 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vdd
SYMATTR Value 15
SYMBOL OpAmps\\OP07 1056 1056 M0
SYMATTR InstName U3
SYMBOL voltage 1344 1200 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V
SYMATTR Value 1.0348
SYMBOL voltage 1056 976 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage 1056 1312 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V21
SYMATTR Value 15
SYMBOL sw 704 1120 R270
SYMATTR InstName S1
SYMATTR Value SWMOD
SYMBOL sw 720 1808 R270
SYMATTR InstName S2
SYMATTR Value SWMOD
TEXT -608 -224 Left 2 !.include tsmc018.lib.txt
TEXT -2240 2072 Left 2 !.tran 10m
TEXT 304 -408 Left 2 !.model SWMOD VSWITCH (Ron=1 Roff=1Meg Vt=0 Vh=0.05)
TEXT 272 -144 Left 2 ;Vin
TEXT 1592 8 Left 2 ;Vout
TEXT 472 1224 Left 2 ;Vy/n
